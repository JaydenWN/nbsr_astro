---
import Image from "astro/components/Image.astro"
import starIcon from '../../assets/icons/star.svg'
import rightArrow from '../../assets/icons/right_arrow.svg'
---

<section id="testimonials">
    <h2 id="testimonials_title">Testimonials</h2>
    <div class="embla">
        <div class="embla__container">

            <div class="embla__slide">
                <fieldset id="testimonials_fieldset">
                    <legend>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                    </legend>
                    <p>
                        What a fantastic experience.Rebeen and his super helpful team looked after us to fix our broken wing mirror.  The staff from reception to repair were so helpful and friendly.I would recommend them to anyone.
                    </p>
                    <p id="testimonials_fieldset--person">- Deb G</p>
                </fieldset>
            </div>

            <div class="embla__slide">
                <fieldset id="testimonials_fieldset">
                    <legend>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                        <Image src={starIcon} alt="star icon"/>
                    </legend>
                    <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Aut fuga praesentium sed minima, dolore quo sint maiores at ipsum dolores.
                    </p>
                    <p id="testimonials_fieldset--person">- Deb 2</p>
                </fieldset>
            </div>
        </div>
    </div>
    <div id="fake_icons">Slide <Image src={rightArrow} alt="arrow pointing right"></div>
</section>

<style>
    #fake_icons{
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--sm);
        opacity: 0.3;
        margin-top: var(--sm);
    }
    #testimonials{
        padding: var(--lg);
        display: flex;
        flex-direction: column;
        background-color: var(--grey);
    }

    #testimonials_title{
        font-size: 2em;
        text-align: center;
    }

    #testimonials_fieldset{
        border: 1px solid var(--red);
        display: flex;
        flex-direction: column;
        padding: var(--md);
        text-align: center;
        gap: var(--sm);
        align-items: center;
        justify-content: center;
    }

    #testimonials_fieldset legend{
        display: flex;
        align-self: center;
        justify-content: center;
        padding: var(--sm);
    }

    #testimonials_fieldset legend img{
        max-width: 2em;
        max-height: 2em;
    }
   
    #testimonials_fieldset--person{
        align-self: flex-end;
    }
    .embla {
        overflow: hidden;
    }
    .embla__container {
        display: flex;
    }
    .embla__slide {
        margin-right: var(--md);
        flex: 0 0 100%;
        min-width: 0;
    }

    @media (width >= 768px){
        #testimonials{
            padding: var(--tb);
        }
        #testimonials_title{
            font-size: 3em;
        }
        #testimonials_fieldset{
            padding: var(--tb)
        }
    }
    @media (width >= 1024px){
        #fake_icons{
            visibility: hidden;
        }
        #testimonials{
            padding: var(--lt);
            gap: var(--lt)
        }
        #testimonials_fieldset{
            padding: var(--tb)
        }
        .embla__slide {
            margin-right: var(--md);
            flex: 0 0 calc(50% - var(--md));
            min-width: 0;
        }
    }
    @media (width >= 1440px){
        #testimonials{
            padding: var(--dt);
            display: flex;
            align-items: center;
        }
        #testimonials_fieldset{
            max-width: 50%;
            padding: var(--tb)
        }
    }
    @media (width >= 2560px){
        #testimonials{
            padding: var(--fk);
        }
        #testimonials_fieldset{
            max-width: 40%;
        }
    }

</style>

<script>
    import EmblaCarousel from 'embla-carousel'

    const emblaNode = document.querySelector('.embla')
    const options = { loop: true }
    const emblaApi = EmblaCarousel(emblaNode, options)

    console.log(emblaApi.slideNodes()) // Access API

</script>